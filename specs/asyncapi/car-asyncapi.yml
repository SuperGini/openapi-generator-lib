asyncapi: 3.0.0
info:
  title: Account Service
  version: 1.0.1
  description: This service is in charge of processing user signups
channels:
  updateCar:
    address: updateCar
    messages:
      CarEvent:
        $ref: '#/components/messages/CarEvent'
operations:
  updateCar:
    action: send
    channel:
      $ref: '#/channels/updateCar'
    messages:
      - $ref: '#/channels/updateCar/messages/CarEvent'


components:
  schemas:
    CarEvent:
      required:
        - vin
        - name
        - constructorEvent
      type: object
      additionalProperties: false #very important to set this field to false
      properties:
        vin:
          type: string
          pattern: "^[0-9A-Za-z]{17}$"
          example: WF0FG56DF5687W567
          description: Max of 17 alfa-numeric character
        name:
          type: string
          example: Focus
          description: name of the car model
        constructorEvent:
          $ref: "#/components/schemas/ConstructorEvent"
    ConstructorEvent:
      required:
        - namex
      type: object
      additionalProperties: false
      properties:
        namex:
          type: string
          pattern: "^[^<>()]{0,60}$"
          example: Ford
          description: Do not allow <> or () and the string can have a maximum of 60 characters represents the constructor of the car


  messages:
    CarEvent:
      payload:
        $ref: "#/components/schemas/CarEvent"